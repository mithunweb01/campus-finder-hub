const messagesKey = "collegeFinderMessages";
let messages = JSON.parse(localStorage.getItem(messagesKey)) || [];

function saveMessages() {
  localStorage.setItem(messagesKey, JSON.stringify(messages));
}

function displayMessages() {
  const allDisplays = document.querySelectorAll(".messages-display");
  allDisplays.forEach(container => {
    container.innerHTML = "";
    messages.forEach(msg => {
      const div = document.createElement("div");
      div.classList.add("message");
      if (msg.text.toLowerCase().startsWith("admin:")) {
        div.innerHTML = `<strong>Admin:</strong> ${msg.text.slice(6).trim()}`;
        div.style.background = "#003366";
        div.style.color = "white";
      } else {
        div.textContent = msg.text;
        div.style.background = "#e6f0ff";
      }
      div.style.padding = "8px";
      div.style.margin = "6px 0";
      div.style.borderRadius = "10px";
      container.appendChild(div);
    });
    container.scrollTop = container.scrollHeight;
  });
}

function sendMessage(inputId) {
  const input = document.getElementById(inputId);
  const text = input.value.trim();
  if (!text) return;
  messages.push({ text });
  saveMessages();
  displayMessages();
  input.value = "";
}
